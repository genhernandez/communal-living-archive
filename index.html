<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
    <!--A-frame requirements -->
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
<!--    <script src="components/set-image.js"></script>-->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">
      
    <!--jquery-->
<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
      
    <link rel="stylesheet" type="text/css" href="jquery.fullPage.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <!-- This following line is optional. Only necessary if you use the option css3:false and you want to use other easing effects rather than "linear", "swing" or "easeInOutCubic". -->
      <script src="vendors/jquery.easings.min.js"></script>

      <!-- This following line is only necessary in the case of using the option `scrollOverflow:true` -->
      <script type="text/javascript" src="vendors/scrolloverflow.min.js"></script>
       <script type="text/javascript" src="jquery.fullPage.js"></script>
          <link rel="stylesheet" href="index.css">

      <!--This is the VR View import -->
      <script src="/vrview/build/vrview.js"></script>
      
      <script>
        $(document).ready(function() {
	       $('#fullpage').fullpage({
               css3: true
           });
        });
      </script>
      
      <style type="text/css">
          .section {
              font-size: 6em;
          }
      </style>
    <title>Communal Living Archive</title>
  </head>
  <body>
      <div id="fullpage">
        <section class="welcome-section section" data-anchor="firstPage">
            <div class="welcome-slide hidden1">
                <p class="welcome-text">Welcome To</p>
            </div> 
            <div class="welcome-slide hidden2">
                <p class="welcome-text">The Communal Living Archive</p>
            </div>
            <div class="welcome-slide hidden3">
                <p class="welcome-text special-text">Stories from Sexually Diverse and Transgender Migrant Farmworkers</p>
            </div>
            <div class="welcome-slide hidden4 background-img">
                <p class="welcome-text special-text">Stories from Sexually Diverse and Transgender Migrant Farmworkers</p>
            </div>
        </section>
        <section class="second-content-section section" data-anchor="secondPage" id="second-section" style="background-color:purple;">
                <div class="second-content-slide">
                    <h1> I'm in the second section</h1>
                </div>
          </section>
          <section class="third-content-section section" data-anchor="thirdPage" id="third-section" style="background-color:blue;">
                <div class="third-content-slide">
                    <h1 style="color:white;"> I'm in the third section</h1>
                </div>
          </section>
          <section class="fourth-content-section section" data-anchor="fourthPage" id="fourth-section" >
            <div class="fourth-content-slide" id="add-here">
                <div class="button-container row">
                    <div class="col-md vr-col">
                    <p class="vr-button-text">Visit the Cavour Club</p>
                    <a href="a-frame/environment_1.html" class="btn btn-danger vr-button" style="color:white;"> Go to Environment</a>    
                    </div>
                    <div class="col-md">
                    <div id="launch-360">
                        <div class="component_cta_container animation--grow animation-delay--2 cta--colored-alpha js-show-pano mdl-button--360 is-hidden-edge">
                           <p class="component_cta_container component_cta_container_text" style="color:white;">Visit the Cavour Club in 360</p>
                            <a class="mdl-button mdl-button--fab component_cta mdl-js-ripple-effect mdl-js-button" href="#" onclick="return makeFullScreen()">
                                <div>
                                    <div class="component_cta_sprite--360"></div>
                                </div>
                                <span class="mdl-button_ripple-container">
                                    <span class="mdl-ripple is-animating" style="width: 217.023px; height: 217.023px; transform: translate(-50%, -50%) translate(36px, 29px);"></span>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </section>
        <section class="fifth-content-section section" data-anchor="fifthPage" id="fifth-section" style="background-color:yellow;">
                <div class="fifth-content-slide">
                    <h1> I'm in the fifth section</h1>
                </div>
        </section>
        <section class="sixth-content-section section" data-anchor="sixthPage" id="sixth-section" style="background-color:orange;">
                <div class="sixth-content-slide">
                    <h1> I'm in the sixth section</h1>
                </div>
        </section>
        <section class="seventh-content-section section" data-anchor="seventhPage" id="seventh-section" style="background-color:red;">
                <div class="seventh-content-slide">
                    <h1> I'm in the seventh section</h1>
                </div>
        </section>
          
        </div>
      <script>  
          var elements = ['hidden1', 'hidden2', 'hidden3', 'hidden4'];

          for (let i = 0; i < elements.length; i++) {
            setTimeout(function() {
            $("." + elements[i]).css("opacity", "1");
            }, 2500 * i);
            if (i < (elements.length - 1)) { //for displaying the last element
                setTimeout(function() {
                $("." + elements[i]).css("opacity", "0");
                }, 2500 * (i + 1));
            }
        }
          
        function requestFullScreen(element) {
            // Supports most browsers and their versions.
            var requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullscreen;

            if (requestMethod) { // Native full screen.
                requestMethod.call(element);
            } else if (typeof window.ActiveXObject !== "undefined") { // Older IE.
                var wscript = new ActiveXObject("WScript.Shell");
                if (wscript !== null) {
                    wscript.SendKeys("{F11}");
                }
            }
        }
          
        function onVrViewLoad() {
            // Selector '#vrview' finds element with id 'vrview'.
            var vrView = new VRView.Player('#vrview', {
            width: '100%',
            height: '100%',
            image: 'assets/img/pano/streetView.jpg',
            is_stereo: false
            });
          } 
          
        function makeFullScreen() {
            $('#launch-360').css("opacity", "0");

            var div = document.createElement('div');
            div.setAttribute('id','vrview' );
            document.getElementById('add-here').appendChild(div);
            
            onVrViewLoad();
            document.getElementsByTagName("iframe")[0].className = "fullScreen";
            var elem = document.body;
            requestFullScreen(elem);
        }
          document.addEventListener('fullscreenchange', exitHandler);
          document.addEventListener('webkitfullscreenchange', exitHandler);
          document.addEventListener('mozfullscreenchange', exitHandler);
          document.addEventListener('MSFullscreenChange', exitHandler);

          function exitHandler() {
            if (!document.fullscreenElement && !document.webkitIsFullScreen && !document.mozFullScreen &&                   !document.msFullscreenElement) {
                var elem = document.getElementById('vrview');
                elem.parentNode.removeChild(elem);
                $('#launch-360').css("opacity", "1");

            }
          }
          
    
          
          
      </script>
  </body>
    
</html>